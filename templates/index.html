<!-- Liver Disease Predictor HTML -->

<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Meta tags for character set and viewport settings -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Bootstrap CSS for styling -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.5.2/superhero/bootstrap.min.css">
    
    <!-- Link to custom CSS file -->
    <link rel="stylesheet" href="/static/css/styles.css">
    
    <title>Liver Disease Prediction</title>

    <!-- D3 Library -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    
    <!-- jQuery library -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Custom script -->
    <!-- <script src="static/js/script.js"></script> -->


</head>
<body>
    <!-- Main container for the content -->
    <div class="container mt-5">
        <!-- Heading for the page -->
        <div class="container">
            <h1 class="text-center mb-4">Liver Disease Predictor</h1>
            <p class="text-center mb-4">This tool is designed to estimate the likelihood of liver disease based on various health factors. Please note that this is a prediction tool with an accuracy of 91%. It should not be used as a definitive decision-maker or substitute for professional medical advice. Always consult a healthcare provider for an accurate diagnosis and treatment.</p>
            <!-- Form and other content here -->
        </div>
        <!-- Form for collecting user input -->
        <form id="prediction-form">
            <!-- Age input field -->
            <div class="form-group">
                <label for="age">Age:</label>
                <input type="number" class="form-control" id="age" name="age" required>
            </div>

            <!-- Gender input field with radio buttons -->
            <div class="form-group">
                <label for="gender">Gender:</label><br>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="gender" id="male" value="0" required>
                    <label class="form-check-label" for="male">Male</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="gender" id="female" value="1" required>
                    <label class="form-check-label" for="female">Female</label>
                </div>
            </div>
            
            <!-- BMI input field with range slider -->
            <div class="form-group">
                <label for="bmi">BMI (Body Mass Index, range 15-40): <span id="bmi-value">27.5</span></label>
                <input type="range" class="form-control-range" id="bmi" name="bmi" min="15" max="40" step="0.1" value="27.5" required>
            </div>

            <!-- Alcohol Consumption input field -->
            <div class="form-group">
                <label for="alcoholconsumption">Alcohol Consumption (units per week, 1 unit = 250ml beer):</label>
                <input type="number" class="form-control" id="alcoholconsumption" step="any" name="alcoholconsumption" required>
            </div>

            <!-- Smoking input field with radio buttons -->
            <div class="form-group">
                <label for="smoking">Smoking:</label><br>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="smoking" id="smokingYes" value="1" required>
                    <label class="form-check-label" for="smokingYes">Yes</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="smoking" id="smokingNo" value="0" required>
                    <label class="form-check-label" for="smokingNo">No</label>
                </div>
            </div>

            <!-- Genetic Risk input field with dropdown -->
            <div class="form-group">
                <label for="geneticrisk">Genetic Risk:</label>
                <select class="form-control" id="geneticrisk" name="geneticrisk" required>
                    <!-- <option value="" disabled selected>Select Risk Level</option> -->
                    <option value="0">Low</option>
                    <option value="1">Medium</option>
                    <option value="2">High</option>
                </select>
            </div>
            
            <!-- Physical Activity input field with range slider -->
            <div class="form-group">
                <label for="physicalactivity">Physical Activity (hours per week, range 0-10): <span id="activity-value">5</span></label>
                <input type="range" class="form-control-range" id="physicalactivity" name="physicalactivity" min="0" max="10" step=".1" value="5" required>
            </div>

            <!-- Diabetes input field with radio buttons -->
            <div class="form-group">
                <label for="diabetes">Diabetes:</label><br>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="diabetes" id="diabetesYes" value="1" required>
                    <label class="form-check-label" for="diabetesYes">Yes</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="diabetes" id="diabetesNo" value="0" required>
                    <label class="form-check-label" for="diabetesNo">No</label>
                </div>
            </div>

            <!-- Hypertension input field with radio buttons -->
            <div class="form-group">
                <label for="hypertension">Hypertension:</label><br>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="hypertension" id="hypertensionYes" value="1" required>
                    <label class="form-check-label" for="hypertensionYes">Yes</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="hypertension" id="hypertensionNo" value="0" required>
                    <label class="form-check-label" for="hypertensionNo">No</label>
                </div>
            </div>
            
            <!-- Liver Function Test input field with range slider -->
            <div class="form-group">
                <label for="liverfunctiontest">Liver Function Test (range 0-100): <span id="liverfunction-value">50</span></label>
                <input type="range" class="form-control-range" id="liverfunctiontest" name="liverfunctiontest" min="0" max="100" step=".1" value="50" required>
            </div>

            <!-- Submit button -->
            <button type="submit" class="btn btn-primary">Predict</button>
        </form>

        <!-- Container for displaying the prediction result -->
        <div id="result" class="mt-4">
            <h3>Prediction Results:</h3>
            <p id="prediction-result"></p>
        </div>

 <!-- JavaScript for handling form interactions with d3.js -->

 <script>
    document.addEventListener('DOMContentLoaded', function() { // This line makes sure the code runs only after the entire web page has loaded.

        // Function to update the display of form values
        function updateDisplay() {
            d3.select('#bmi-value').text(d3.select('#bmi').property('value'));
            d3.select('#activity-value').text(d3.select('#physicalactivity').property('value'));
            d3.select('#liverfunction-value').text(d3.select('#liverfunctiontest').property('value'));
        }

        // Event listeners for form inputs
        d3.select('#bmi').on('input', updateDisplay);
        d3.select('#physicalactivity').on('input', updateDisplay);
        d3.select('#liverfunctiontest').on('input', updateDisplay);

        // Sets the initial display values when the page first loads.
        updateDisplay();


        d3.json ("/predict", (data)=>console.log(data));

        on submit como corro una funcion y como regreso la data


        // // Handle form submission with D3
        // d3.select("#prediction-form").on("submit", function(event) {
        //     event.preventDefault(); // Prevent default form submission (which would cause the page to reload)

        //     // Gather form data
        //     const formData = new FormData(this);
        //     const data = {};
        //     formData.forEach((value, key) => data[key] = value);

        //     // Send data to Flask using Fetch API
        //     fetch('/predict', {
        //         method: 'POST',
        //         headers: {
        //             'Content-Type': 'application/x-www-form-urlencoded'
        //         },
        //         body: new URLSearchParams(data).toString() // Convert the data object to URL-encoded string
        //     })
        //     .then(response => response.json())
        //     .then(result => {
        //         // Display the prediction result
        //         d3.select("#prediction-result").text(`Prediction: ${result.prediction}`);
        //     })
        //     .catch(error => {
        //         console.error('Error:', error);
        //     });
        // });
    });
</script>
</div>
</body>
</html>